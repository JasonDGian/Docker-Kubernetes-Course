# ðŸ“Œ Managing images and containers.
In all commands used here on, you can use the option `--help` to invoke the help center of the command in case you feel lost.

## ðŸ”¹ Managing containers.
<table>
    <thead>
        <tr>
            <th>Command</th>
            <th>Description</th>
            <th>Syntax</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>docker ps -a</code></td>
            <td>Lists all containers, both active and inactive.</td>
            <td><code>docker ps -a</code></td>
        </tr>
        <tr>
            <td><code>docker run</code></td>
            <td>Creates a new container from an image.</td>
            <td><code>docker run &lt;options&gt; &lt;image-name&gt;</code></td>
        </tr>
        <tr>
            <td><code>docker start</code></td>
            <td>Restarts a stopped container.</td>
            <td><code>docker start &lt;container_name_or_id&gt;</code></td>
        </tr>
        <tr>
            <td><code>docker stop</code></td>
            <td>Stops a running container.</td>
            <td><code>docker stop &lt;container_name_or_id&gt;</code></td>
        </tr>
        <tr>
            <td><code>docker run -d</code></td>
            <td>Starts a container in detached mode (background).</td>
            <td><code>docker run -d &lt;image-name&gt;</code></td>
        </tr>
        <tr>
            <td><code>docker start -a</code></td>
            <td>Starts a stopped container in attached mode (listening to output).</td>
            <td><code>docker start -a &lt;container_name_or_id&gt;</code></td>
        </tr>
        <tr>
            <td><code>docker attach</code></td>
            <td>Attaches the terminal to a running container's output.</td>
            <td><code>docker attach &lt;container_name_or_id&gt;</code></td>
        </tr>
        <tr>
            <td><code>docker logs</code></td>
            <td>Fetches the logs of a container.</td>
            <td><code>docker logs &lt;container_name_or_id&gt;</code></td>
        </tr>
        <tr>
            <td><code>docker logs -f</code></td>
            <td>Fetches and keeps listening to logs of a container (follow mode).</td>
            <td><code>docker logs -f &lt;container_name_or_id&gt;</code></td>
        </tr>
        <tr>
            <td><code>docker rm</code></td>
            <td>Removes a stopped container.</td>
            <td><code>docker rm &lt;container_name_or_id&gt;</code></td>
        </tr>
        <tr>
            <td><code>docker rm [container1 container2]</code></td>
            <td>Removes multiple containers.</td>
            <td><code>docker rm container1 container2 ...</code></td>
        </tr>
        <tr>
            <td><code>docker run --rm</code></td>
            <td>Automatically removes the container when it exits.</td>
            <td><code>docker run --rm &lt;image_name&gt;</code></td>
        </tr>
        <tr>
            <td><code>docker cp</code></td>
            <td>Copies files between the host and a running container.</td>
            <td><code>docker cp &lt;host_path&gt; &lt;container_name&gt;:&lt;destination_path&gt;</code></td>
        </tr>
        <tr>
            <td><code>docker cp</code></td>
            <td>Copies files from a container to the host.</td>
            <td><code>docker cp &lt;container_name&gt;:&lt;source_path&gt; &lt;host_destination&gt;</code></td>
        </tr>
    </tbody>
</table>

## ðŸ”¹ Image Management Commands

<table>
    <thead>
        <tr>
            <th>Command</th>
            <th>Description</th>
            <th>Syntax</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><code>docker images</code></td>
            <td>Lists all images in the Docker host.</td>
            <td><code>docker images</code></td>
        </tr>
        <tr>
            <td><code>docker rmi</code></td>
            <td>Removes an image (only if not in use by a container).</td>
            <td><code>docker rmi &lt;image_name_or_id&gt;</code></td>
        </tr>
        <tr>
            <td><code>docker rmi [img1 img2]</code></td>
            <td>Removes multiple images at once.</td>
            <td><code>docker rmi img1 img2 img3</code></td>
        </tr>
        <tr>
            <td><code>docker image prune</code></td>
            <td>Removes all unused images to free up space.</td>
            <td><code>docker image prune</code></td>
        </tr>
        <tr>
            <td><code>docker build --tag</code></td>
            <td>Tags an image during the build process.</td>
            <td><code>docker build --tag &lt;image_name:tag&gt;</code></td>
        </tr>
        <tr>
            <td><code>docker image inspect</code></td>
            <td>Inspects an image to retrieve details such as layers, base OS, and exposed ports.</td>
            <td><code>docker image inspect &lt;image_name&gt;</code></td>
        </tr>
        <tr>
            <td><code>docker tag</code></td>
            <td>Assigns a tag to an existing image.</td>
            <td><code>docker tag &lt;image_name&gt; &lt;tag&gt;</code></td>
        </tr>
    </tbody>
</table>


**IMPORTANT:** If you make changes to an image, restarting an existing container does not apply changes made to the image. You must remove the old container and start a new one for the changes to take effect.

### Fetching the logs of a container.
To fetch the current logged logs of a container user the command 'docker logs <containername or id>'   
If you wish to keep listening to logs of a container use the flag '--follow -f' like this 'docker logs -f <container_name or id>'   
  
## Note container attachment.
The 'docker run' command keeps the terminal busy while the 'docker start' doesnt.   
This happens because 'docker run' runs in 'attached mode' by default while 'docker start' runs in 'detached mode' by default.

"Attached" means "listening to output" of the container. This is useful for things like logs. But being simply "attached" doesn't allow the user to input anything. 

To create a new container in detached mode just use the flag '-d' before the container image. To attach the terminal to an existing detacched container use the docker --attach

### detach terminal from existing  container.
To detach the terminal from an attached container, use the Ctrl + P followed by Ctrl + Q key sequence. This will leave the container running in the background while detaching your terminal from it.

Alternatively, you can start the container with the --detach-keys option to specify a different key sequence for detaching:
docker run --detach-keys="ctrl-d" <image_name>

### starting container with an input tty.
To create or start a container with an input termianl use the flags -i and -t or -it for interactive tty.

### remove a container.
The container must first be stopped, and then use the command 'docker rm <container_name or id>'   

### remove multiple containers. 
The same command: 'docker rm cont1 cont2 cont3 cont4'

### list images.
To list images use the command: 'docker images'

### remove an image.
Note: You can only remove images that are not used by any container, be it stopped or running, due to the mentioned layered architecture.
'docker rmi <image_name or id>'

### remove multiple images.
just like with containers.
'docker rmi img1 img2 img3 img4'

### prune images.
This command will remove all unused images.
'docker image prune'

### automatically remove container when stopped.
achieve this with --rm flag. This container will auto-remove itself when exited.
'docker run --rm image'

# Inspecting images.
Images can be inspected to gain insight on their content.
To inspect an image use the command 'docker image inspect <image_name>'.
With this command you can see the base operating system, ports exposed, commands run etc.. In other words you can inspect layer.

# Copying files from and to a running container.
With the 'docker cp' command we can copy file to and from our docker containers.   
**Important:** Cannot copy from a terminal in attached mode. It must be done from a free terminal in the host.

**Copying from host to container**   
'docker cp <host-source_path> <container_name>:<destination_path>'

**For example**   
docker cp ./dummy.txt myContainer:/copied-files/dummy.txt

**Copying from a container to host**   
'docker cp '<container_name>:<source_path> <host_destiny_path>

# Naming images and containers.
Images are tagged, containers are named.   
- To tag an image use the `--tag <image-name>` flag.   
- To name a container use the `--name <cont-name>` flag.   

## Understanding image tags.
Images are tagged by a composit name - name:tag.
- Name corresponds to the image name. 
- Tag corresponds to the version tag.   
   
![](TAGS.png)

**Example of an image nametag**   
'node:14.9.0'    

**How create a tagged image.**   
Use the `--tag or `-t` flag.
```bash
docker build --tag myImage:0.9.1
```

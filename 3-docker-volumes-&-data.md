# 📌 Understanding docker volumes and data.
When working with Docker, it's essential to understand the different types of data that can exist within a container. These can be categorized into three main types:
- **Fixed Data:** Static, read-only, lives in the image layer.
- **Temporary Data:** Dynamic, lost after container shutdown, stored in the container layer.
- **Persistent Data:** Retained after container shutdown, stored using volumes.
   
## 🔹 Fixed Data
This refers to the data stored in the image layer of Docker.

- It is read-only and does not change during the container's lifecycle.
- Fixed data often includes the base image and the layers created upon it.
- It is static and serves as the foundation for creating the container.
   
## 🔹 Temporary Data   
Temporary data is dynamic and created while the container is running.
- It resides in the container layer, which is writable.
- This data can include user input or variables generated by the application during its operation.
- Once the container is stopped or shut down, this data is lost as it is not stored outside the container.
   
## 🔹 Persistent Data   
Persistent data is also generated or modified during the container's operation, but unlike temporary data, it is retained even after the container is stopped.
- This data is stored outside the container using volumes or external databases/filesystems.
- Volumes and Bind mounts allow this data to be preserved across container restarts, making it ideal for scenarios where data continuity is necessary, such as database applications.

Understanding these distinctions is crucial for effectively managing data in Docker containers.

# 📌 Understanding Docker Volumes. 

<table>
   <tr>
      <td>
         <p>
Docker volumes are directories on your host machine's hard drive that are mounted into containers.<br/> They allow containers to read from and write to the host system. Unlike data stored directly inside a container, data in a volume persists even if the container is stopped, deleted, or restarted. This ensures that important data is not lost when the container lifecycle ends. <br/><br/> In other words, volumes provide a reliable way to manage persistent data in Docker, keeping it separate from the ephemeral nature of containers.
            </p>
         </td>
      <td><img align="right" src="https://github.com/user-attachments/assets/acb4afd1-7962-45f3-a715-ef2d1724b1fe">
</td>
   </tr>
</table>

## 🔹 Anonymous volumes.
These volumes are neither accessible nor editable from the host system. They are difficult to track and require manual clean-up.
If a container is removed automatically upon shutdown using the `--rm` flag, the attached anonymous volume will also be deleted. However, simply stopping or manually deleting a container does not remove its anonymous volume. 
Every time a container is launched from an image configured with an anonymous volume, a new volume is created.

**Assign an anonymous volume to a container**   
To assign an anonymous volume to a container there are two options. 
- Commmand line: `-v /path/in/container`
- Dockerfile: `VOLUME [ "/path/container/directory" ]`

In both cases we must specify **where the managed volume will be mounted inside of the container**.
Add the following instruction.

**Via CLI**   
```bash
docker run -d -v /path/in/container image
```
   
**Dockerfile**   
```bash
VOLUME [ "/path/container/directory" ]
```

**Delete anonymous volumes**
To remove a volume 
```bash
docker volume rm VOLUME-NAME
```

To prune volumes.
```bash
docker volume prune
```

## 🔹 Named volumes.
Named volumes are not attached to specific containers and can not be created inside a dockerfile. Instead they must be assigned to a container at creation time.

**Create a named volume**
```bash
docker volume create <volume-name>
```

**Assign volume**
```bash
docker run -v /path/in/container:<volume-name> image
```

## 🔹 Bind mounts.
Bind mounts allow developers to specify a folder or file on the host machine that will be used as storage within the container. Changes made to the folder or file on the host are immediately reflected in the container, providing real-time synchronization between the host and container.


Set up a bind mount

-v <"absolute-host-path">/<path-in-container>


**Important:**  
When using bind mounts, make sure that docker's services have access to the folder or file you are mounting.  
To configure docker permissions follow these steps:
- Open docker desktop dashboard.
- Click on settings.
- Click on resources.
- Click on file sharing.
- Enter the new path to allow.
- Restart docker desktop.
   
![imagen](https://github.com/user-attachments/assets/1e1c1491-e2f1-49f2-8d41-069cdf7c5423)













### Summary.

![imagen](https://github.com/user-attachments/assets/ecd98e8b-3e10-41aa-97a2-5992b75a2407)


<table border="1" cellpadding="10" cellspacing="0">
  <thead>
    <tr>
      <th>Type</th>
      <th>Managed by</th>
      <th>Accessible by Developer</th>
      <th>Usecase</th>
      <th>Command to Create</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Anonymous Volume</td>
      <td>Docker</td>
      <td>No</td>
      <td>Temporary storage for short-lived data</td>
      <td><code>docker run -v /app busybox</code></td>
    </tr>
    <tr>
      <td>Named Volume</td>
      <td>Docker</td>
      <td>No</td>
      <td>Persistent storage, shared between containers</td>
      <td><code>docker volume create myvolume</code></td>
    </tr>
    <tr>
      <td>Bind Mount</td>
      <td>Host</td>
      <td>Yes</td>
      <td>Development, real-time syncing between host and container</td>
      <td><code>docker run -v /host/path:/container/path busybox</code></td>
    </tr>
  </tbody>
</table>

---

## 🔹 Creating volumes.
There are two types of volumes.
- Anonymous volumes
- Named volumes.

When the developer does not assign a name to a volume, docker will automatically assign a hash-name to it and this is what we know as 'anonymous' volumes. The big problem with anonymous volumes is that they will cease to exist as soon as the attached container is shut down. 


A volume can be specified in several ways.
- Specify a volume inside a Dockerfile.
- Specify a volume in the docker run command.
- 

### ▫️ Adding a volume via Dockerfile.
To add a volume in a Dockerfile, use the VOLUME instruction. This instruction accepts an array of paths, which specifies the directories inside the container that will be used to mount directories from the host system. However, this command only determines where the volume will be mounted within the container, not which host directories will be used for storage.

```bash
VOLUME ["container-mounting-point","container-mounting-point-2",...]
```

To remove a volume 
```bash
docker volume rm VOLUME-NAME
```

To prune volumes.
```bash
docker volume prune
```


# 📍 Other Volume Operations.
### List volumes
```bash
docker volume ls
```

### Delete volumes
```bash
docker volume rm <volume-id>
```

### Prune volumes
```bash
docker volume prune
```
